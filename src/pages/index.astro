---
import { Input } from "@/components/ui/input.tsx";
import { RaisedButton } from "@/components/ui/raised-button";
import { getCollection } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";
import MainLayout from "../layouts/MainLayout.astro";
import BlogPostCard from "../components/BlogPostCard.astro";

const posts = (await getCollection("blog"))
  .filter((post) => !post.data.draft)
  .sort(
    (a, b) =>
      new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf()
  )
  .slice(0, 5);
---

<MainLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
  <div class="space-y-6 mb-6 px-3">
    <h1 class="text-5xl font-black text-foreground tracking-tighter">
      hi i'm aryan.
    </h1>
    <p class="text-xl text-muted-foreground leading-relaxed">
      A clean, minimalistic <a
        href="https://astro.build/"
        class="text-foreground underline underline-offset-2 hover:text-primary transition-colors"
        >Astro</a
      > blog starter template designed with modern aesthetics and exceptional typography.
    </p>

    <div class="flex items-center gap-2">
      <Input placeholder="youremail@gmail.com" />
      <RaisedButton color="#0091ff"> Sign Up </RaisedButton>
    </div>
  </div>

  <div class="space-y-6 p-3 pt-0">
    <p class="text-xl text-muted-foreground leading-relaxed font-medium">
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur, iste
      ut. Sequi dolor, delectus aliquid ex voluptatem et quia nostrum mollitia
      deleniti alias repellat doloremque quod explicabo aliquam molestiae
      repudiandae, deserunt aut libero in aspernatur iure. Quae fugit at in
      ducimus id laborum quod a labore incidunt repellendus. Soluta aut quidem
      hic sunt vel eaque corporis, quasi quos, voluptatem excepturi impedit
      ratione non itaque dolores eum! Numquam temporibus unde atque asperiores
      aut velit neque, accusamus quia, quibusdam eius dolor ducimus. Nemo error
      fugit, explicabo aspernatur autem odit porro dolorem est nam neque quam
      placeat reprehenderit, et harum esse voluptatem iure!
    </p>
  </div>

  <section class="my-5">
    <div class="flex border-separate flex-col divide-zinc-700 divide">
      {posts.map((post) => <BlogPostCard post={post} variant="compact" />)}

      {
        posts.length === 0 && (
          <p class="text-muted-foreground text-center py-8">
            No posts yet.{" "}
            <a href="/create" class="text-primary hover:underline">
              Create your first post
            </a>
            .
          </p>
        )
      }
    </div>
  </section>

  <div class="mx-auto w-full flex justify-center">
    <a href="/posts" class="w-full">
      <RaisedButton color="#0091ff" className="w-full"> View All </RaisedButton>
    </a>
  </div>
</MainLayout>
